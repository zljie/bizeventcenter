# 企业中间件业务事件中心 - 需求信息汇总

## 项目概述
**项目名称**: 企业中间件业务事件中心POC项目  
**项目目标**: 构建统一的企业中间件业务事件中心  
**部署地址**: https://0ma6ya0vwben.space.minimaxi.com

## 1. 核心用户故事

### 1.1 石油化工业务系统架构师
- **需求描述**: 基于行业标准化的石油化工事件模版快速定义业务事件
- **具体诉求**: 
  - 在统一平台上管理所有业务系统的业务事件定义
  - 通过可视化界面配置事件的分类、属性和触发条件
  - 为新业务系统提供标准的事件注册接口和文档
- **用户价值**: 快速构建标准化的业务事件架构，降低系统集成复杂度

### 1.2 业务系统开发者
- **需求描述**: 通过Web界面查看已定义的事件模版和事件属性
- **具体诉求**: 
  - 基于模版快速创建符合标准的业务事件定义
  - 通过API接口发布业务事件，无需关心底层分发机制
  - 查看事件的发布状态和消费情况
- **用户价值**: 简化开发流程，专注于业务逻辑实现

### 1.3 事件订阅管理用户
- **需求描述**: 通过可视化界面查看所有可订阅的业务事件
- **具体诉求**: 
  - 配置事件订阅关系，支持多种过滤条件
  - 设置多种推送方式（Webhook等）
  - 监控订阅状态和处理结果
- **用户价值**: 灵活配置事件订阅，快速响应业务变化

### 1.4 业务运营人员
- **需求描述**: 查看业务事件的实时发布和处理统计
- **具体诉求**: 
  - 监控关键业务事件的处理状态和异常情况
  - 查看业务事件日志，支持按时间、事件类型等条件查询
  - 生成业务事件相关的运营报表
- **用户价值**: 提升业务洞察，支持运营决策和问题排查

### 1.5 企业CTO
- **需求描述**: 获得标准化的企业级业务事件管理平台
- **具体诉求**: 
  - 基于石油化工行业标准的事件管理体系
  - 降低系统建设和维护成本
  - 提升企业整体的数字化能力
- **用户价值**: 构建企业数字化基础设施，支持长期发展

## 2. 功能模块需求拆解

### 2.1 业务事件注册模块 (Message Subject Registration)

#### 前端功能 (F001-F005)
| 功能编号 | 功能名称 | 功能描述 | 验收标准 | 需求说明 |
|---------|---------|---------|---------|---------|
| F001 | 事件模版选择界面 | 提供SAP ERP石油化工类事件模版选择界面，支持按分类浏览 | 用户可以快速找到所需模版，模版信息展示完整 | 基于石油化工行业标准，提供19个预定义模版 |
| F002 | 事件属性配置界面 | 提供事件属性配置表单，包括事件ID、名称、业务域等 | 表单验证完整，支持必填项校验和格式验证 | 支持事件ID唯一性检查和业务规则验证 |
| F003 | 事件分类管理 | 提供按生产、采购、销售、库存、安全等分类的事件管理 | 分类导航清晰，支持分类筛选和搜索 | 五大分类体系，每个分类包含多个子分类 |
| F004 | 事件数据结构定义 | 提供JSON Schema格式的事件数据结构编辑器 | 支持语法高亮、实时预览、格式校验 | 提供可视化JSON编辑器，支持语法高亮和实时校验 |
| F005 | 事件模版保存管理 | 提供事件模版的保存、编辑、删除、复制功能 | 操作响应及时，支持撤销/重做和数据恢复 | 支持版本控制和草稿功能 |

#### 后端功能 (F006-F010)
| 功能编号 | 功能名称 | 功能描述 | 验收标准 | 需求说明 |
|---------|---------|---------|---------|---------|
| F006 | 事件模版库API | 提供石油化工事件模版的查询和获取API接口 | 支持按分类查询，响应时间<200ms | 提供模版的RESTful API，支持分页和条件查询 |
| F007 | 事件注册管理API | 提供事件定义的新增、更新、删除、查询API接口 | 支持事务操作，数据一致性保证 | 完整的CRUD操作，支持幂等性和事务性 |
| F008 | 事件属性校验 | 提供事件属性、业务规则、数据格式的服务器端校验 | 校验规则完整，错误信息明确 | 多层验证机制，友好的错误提示 |
| F009 | 事件分类服务 | 提供事件分类的层级管理和统计服务 | 支持分类树形结构，支持统计查询 | 支持层级分类和聚合统计 |
| F010 | 数据存储管理 | 提供事件定义和模版数据的持久化存储服务 | 数据可靠性99.9%，支持备份恢复 | 高可用数据存储，支持灾备 |

### 2.2 业务事件发布大厅模块 (Event Publishing Center)

#### 前端功能 (F011-F015)
| 功能编号 | 功能名称 | 功能描述 | 验收标准 | 需求说明 |
|---------|---------|---------|---------|---------|
| F011 | 事件列表展示 | 提供事件列表的表格展示，支持排序、筛选、分页 | 支持多条件筛选，响应时间<500ms | 高性能表格，支持虚拟滚动和高级筛选 |
| F012 | 事件状态管理 | 提供事件状态的可视化管理（草稿、已发布、已停用） | 状态切换有确认对话框，支持批量操作 | 直观的颜色状态指示，支持批量状态变更 |
| F013 | 新增/编辑事件 | 提供事件定义的新增和编辑界面，支持模版选择 | 表单数据完整性校验，支持自动保存草稿 | 智能表单，支持自动补全和实时验证 |
| F014 | 事件搜索功能 | 提供按事件名称、分类、状态的搜索功能 | 支持模糊搜索，搜索结果实时更新 | 全文搜索，支持模糊匹配和搜索历史 |
| F015 | 批量操作功能 | 提供批量发布、批量停用、批量删除操作 | 支持多选，操作有进度提示和结果反馈 | 进度条显示，支持中断和错误处理 |

#### 后端功能 (F016-F020)
| 功能编号 | 功能名称 | 功能描述 | 验收标准 | 需求说明 |
|---------|---------|---------|---------|---------|
| F016 | 事件管理API | 提供事件定义CRUD的完整API服务 | RESTful设计，支持分页查询和条件过滤 | 标准的REST API，支持OData查询 |
| F017 | 事件发布服务 | 提供业务事件发布和状态管理服务 | 支持事件发布、停用、恢复等状态变更 | 状态机模式，确保状态变更的原子性 |
| F018 | 事件搜索服务 | 提供高效的事件搜索和索引服务 | 支持全文搜索，索引更新及时 | 基于Elasticsearch的全文搜索 |
| F019 | 批量操作服务 | 提供批量事件操作的API服务 | 支持批量操作，操作原子性和幂等性 | 分批处理，支持断点续传 |
| F020 | 事件版本管理 | 提供事件定义的版本控制服务 | 支持版本历史查看，支持版本回滚 | Git风格的版本管理 |

### 2.3 事件订阅中心模块 (Event Subscription Center)

#### 前端功能 (F021-F025)
| 功能编号 | 功能名称 | 功能描述 | 验收标准 | 需求说明 |
|---------|---------|---------|---------|---------|
| F021 | 订阅关系展示 | 提供订阅关系的列表展示和管理界面 | 订阅信息展示完整，支持订阅状态的实时更新 | 实时状态更新，支持订阅健康度监控 |
| F022 | 新增订阅配置 | 提供订阅关系的创建和配置界面 | 支持事件选择、过滤条件设置、推送方式配置 | 可视化配置，支持条件预览和测试 |
| F023 | 订阅规则设置 | 提供订阅过滤条件和触发规则的可视化配置 | 支持复杂条件配置，条件测试功能 | 可视化规则编辑器，支持规则测试 |
| F024 | 订阅状态监控 | 提供订阅状态和处理结果的监控界面 | 支持实时状态监控，异常情况有告警提示 | 实时监控面板，异常告警机制 |
| F025 | 消息推送配置 | 提供Webhook等推送方式配置 | 支持多种推送方式，配置界面直观易用 | 统一的推送配置管理，支持协议适配 |

#### 后端功能 (F026-F030)
| 功能编号 | 功能名称 | 功能描述 | 验收标准 | 需求说明 |
|---------|---------|---------|---------|---------|
| F026 | 订阅管理API | 提供订阅关系的CRUD API服务 | 支持复杂查询条件，响应时间<300ms | 支持复杂的查询条件和聚合统计 |
| F027 | 订阅规则引擎 | 提供订阅匹配和过滤的规则引擎服务 | 支持复杂规则匹配，性能满足高并发要求 | 基于规则的匹配引擎，支持动态规则 |
| F028 | 推送方式适配 | 提供Webhook等推送方式适配 | 支持多种推送协议，失败重试机制完善 | 多协议适配器，支持断线重连 |
| F029 | 订阅状态服务 | 提供订阅状态监控和状态变更服务 | 支持状态变更推送，状态数据实时更新 | 基于事件的状态同步机制 |
| F030 | 推送队列管理 | 提供消息推送队列的存储和调度服务 | 队列可靠性99.9%，支持优先级和延时推送 | 基于RocketMQ的可靠消息队列 |

### 2.4 系统管理和监控模块 (System Management & Monitoring)

#### 前端功能 (F031-F034)
| 功能编号 | 功能名称 | 功能描述 | 验收标准 | 需求说明 |
|---------|---------|---------|---------|---------|
| F031 | 系统仪表盘 | 提供系统整体运行状态的可视化仪表盘 | 关键指标实时更新，支持多维度数据展示 | 实时数据大屏，支持多维度分析 |
| F032 | 业务事件日志 | 提供事件发布和消费的完整日志查询界面 | 支持按时间、事件类型、状态等条件查询 | 高级日志查询，支持全文搜索 |
| F033 | 用户权限管理 | 提供用户登录和权限管理界面 | 支持角色权限配置，权限控制精确到功能级 | 细粒度权限控制，支持动态权限 |
| F034 | 系统设置管理 | 提供系统参数和配置的Web管理界面 | 配置修改实时生效，支持配置备份和恢复 | 热更新配置，支持配置版本管理 |

#### 后端功能 (F035-F039)
| 功能编号 | 功能名称 | 功能描述 | 验收标准 | 需求说明 |
|---------|---------|---------|---------|---------|
| F035 | 认证授权服务 | 提供JWT Token认证和权限验证服务 | 支持SSO集成，权限验证<100ms | 单点登录集成，基于角色的访问控制 |
| F036 | 业务监控服务 | 提供事件发布、消费、订阅等业务指标监控 | 支持实时指标采集，支持告警规则配置 | 实时指标采集，智能告警 |
| F037 | 日志记录服务 | 提供完整的业务操作和系统日志记录 | 支持结构化日志，支持日志查询和分析 | 结构化日志，支持日志聚合分析 |
| F038 | 配置管理服务 | 提供系统参数的动态配置和热更新服务 | 配置变更实时生效，支持配置版本管理 | 配置中心，支持热更新和回滚 |
| F039 | 统计报表服务 | 提供业务事件的统计分析和报表生成服务 | 支持多维度统计，报表生成时间<5s | 多维度分析，支持定时报表 |

## 3. 核心功能模块映射

### 3.1 仪表板 (Dashboard)
**对应功能**: F031, F036, F037, F039
**需求说明**: 系统运行状态的可视化监控面板，实时展示关键业务指标

### 3.2 消息主体登记 (Message Subject Registration)
**对应功能**: F001-F010
**需求说明**: SAP ERP石油化工类事件模版的管理和配置中心

### 3.3 事件发布中心 (Event Publishing Center)
**对应功能**: F011-F020  
**需求说明**: 业务事件的生命周期管理和发布控制中心

### 3.4 事件订阅中心 (Event Subscription Center)
**对应功能**: F021-F030
**需求说明**: 事件订阅关系的管理和消息推送配置中心

### 3.5 业务事件日志 (Business Event Log)
**对应功能**: F032
**需求说明**: 事件处理全流程的日志查询和追踪中心

### 3.6 系统设置 (System Settings)
**对应功能**: F033-F034, F035, F038
**需求说明**: 用户权限管理和系统配置的集中管理界面

## 4. 技术架构需求

### 4.1 前端技术需求
- **Web框架**: React 18 + TypeScript
- **UI组件库**: Ant Design X5
- **状态管理**: React Query + Context API
- **构建工具**: Vite
- **响应式设计**: 支持桌面端和移动端

### 4.2 后端技术需求  
- **开发框架**: Spring Boot 3.0+
- **数据访问**: MyBatis Plus + PostgreSQL
- **消息中间件**: RocketMQ (可扩展支持Kafka、RabbitMQ)
- **缓存**: Redis
- **监控**: Micrometer + Prometheus

### 4.3 性能需求
- **响应时间**: 页面加载时间 < 3秒
- **并发支持**: 支持1000+并发用户
- **可用性**: 系统可用性 99.9%
- **扩展性**: 支持水平扩展

## 5. 验收标准汇总

### 5.1 功能验收标准
- **完整性**: 所有功能点100%实现
- **可用性**: 用户操作成功率 > 99%
- **性能**: 关键操作响应时间符合要求
- **稳定性**: 连续运行24小时无故障

### 5.2 兼容性验收标准
- **浏览器兼容**: 支持Chrome、Firefox、Safari、Edge主流浏览器
- **设备兼容**: 支持桌面端1024px+分辨率
- **网络兼容**: 支持4G/5G/WiFi网络环境

### 5.3 安全验收标准
- **数据安全**: 敏感数据加密存储和传输
- **访问控制**: 基于角色的权限控制
- **审计日志**: 完整的操作审计追踪

## 6. 特殊需求说明

### 6.1 石油化工行业特性
- **19个预定义事件模版**: 涵盖生产、采购、销售、库存、安全五大类
- **行业标准化**: 符合石油化工行业的业务标准
- **安全等级**: 高安全级别的企业级应用

### 6.2 适配器层架构
- **消息中间件解耦**: 业务组件不依赖特定消息中间件
- **热插拔支持**: 支持运行时切换消息中间件
- **标准消息格式**: 统一的内部消息规范

### 6.3 演示特性
- **Mock数据**: 使用前端模拟数据，页面刷新后重置
- **功能完整**: 所有功能点都有完整的界面和交互
- **商业风格**: 采用蓝色主色调的企业级UI设计